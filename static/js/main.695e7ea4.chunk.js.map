{"version":3,"sources":["app.jsx","index.js"],"names":["Textarea","Styled","textarea","fontFamily","border","width","height","fontSize","lineHeight","padding","background","color","outline","App","useState","outputType","outputTypeSet","originalSize","originalSizeSet","base64Data","base64DataSet","rgbMatrix","rgbMatrixSet","loadingImage","loadingImageSet","onFileSelected","event","stopPropagation","preventDefault","dt","dataTransfer","file","files","target","size","fr","window","FileReader","onload","data","a","base64src","currentTarget","result","imageToRGBMatrix","dataMatrix","imageToRawData","crop","canvasRawData","ctx","canvas","toDataURL","readAsDataURL","onDragOver","masterShadow","_","map","row","rowIndexSrc","col","colIndexSrc","i","j","rgb","hex","tinycolor","toHexString","compressColor","r","g","b","join","handleFocus","select","h","style","fontWeight","display","backgroundColor","onDrop","onDragEnter","type","onChange","multiple","accept","href","active","onClick","src","maxWidth","onFocus","className","value","length","toLocaleString","Number","boxShadow","marginBottom","marginRight","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.695e7ea4.chunk.js","sourcesContent":["import React, { Fragment, useState } from \"react\";\nimport tinycolor from \"tinycolor2\";\nimport _ from \"lodash\";\n\nimport {\n  HeaderH1,\n  Text,\n  Space,\n  Box,\n  A,\n  Container,\n  Dropzone,\n  Ul,\n  Li,\n  Tabs,\n  Tab,\n  Inline,\n} from \"jbx\";\n\nimport Styled from \"styled-components\";\n\nimport { imageToRGBMatrix, imageToRawData } from \"canvas-image-utils\";\n\nconst Textarea = Styled.textarea({\n  fontFamily: \"monaco, monospace\",\n  border: \"none\",\n  width: \"100%\",\n  height: 256,\n  fontSize: 13,\n  lineHeight: 1.309,\n  padding: \"16px 18px\",\n  background: \"#ecf0f1\",\n  color: \"#34495e\",\n  \":focus\": {\n    outline: \"none\",\n  },\n});\n\nfunction compressColor(rgb) {\n  const hex = tinycolor(rgb).toHexString();\n\n  switch (\n    hex // based on CSS3 supported color names http://www.w3.org/TR/css3-color/\n  ) {\n    case \"#c0c0c0\":\n      return \"silver\";\n    case \"#808080\":\n      return \"gray\";\n    case \"#800000\":\n      return \"maroon\";\n    case \"#ff0000\":\n      return \"red\";\n    case \"#800080\":\n      return \"purple\";\n    case \"#008000\":\n      return \"green\";\n    case \"#808000\":\n      return \"olive\";\n    case \"#000080\":\n      return \"navy\";\n    case \"#008080\":\n      return \"teal\";\n  }\n  return hex[1] === hex[2] && hex[3] === hex[4] && hex[5] === hex[6]\n    ? \"#\" + hex[1] + hex[3] + hex[5]\n    : hex;\n}\n\nfunction App() {\n  const [outputType, outputTypeSet] = useState(\"SHADOW\");\n  const [originalSize, originalSizeSet] = useState(0);\n  const [base64Data, base64DataSet] = useState(\"\");\n  const [rgbMatrix, rgbMatrixSet] = useState(null);\n  const [loadingImage, loadingImageSet] = useState(false);\n\n  function onFileSelected(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    const dt = event.dataTransfer;\n    const files = dt ? dt.files : event.target.files;\n    const file = files[0];\n\n    originalSizeSet(file.size);\n\n    const fr = new window.FileReader();\n\n    loadingImageSet(true);\n\n    fr.onload = async (data) => {\n      const base64src = data.currentTarget.result;\n      const dataMatrix = await imageToRGBMatrix(base64src, { size: 200 });\n      const canvasRawData = await imageToRawData(base64src, {\n        size: 1080,\n        crop: false,\n      });\n\n      base64DataSet(canvasRawData.ctx.canvas.toDataURL(\"image/jpeg\", 0.66));\n      rgbMatrixSet(dataMatrix);\n      loadingImageSet(false);\n    };\n    fr.readAsDataURL(file);\n  }\n\n  function onDragOver(event) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  let scale = 1;\n\n  const masterShadow = _.map(rgbMatrix, (row, rowIndexSrc) => {\n    return _.map(row, (col, colIndexSrc) => {\n      const i = colIndexSrc * scale;\n      const j = rowIndexSrc * scale;\n\n      const color = compressColor(`rgb(${col.r},${col.g},${col.b})`);\n\n      const scaleCompensation = scale !== 1 ? ` 0 ${scale / 2}px` : ``;\n\n      return `${color} ${j ? j + \"px\" : 0} ${\n        i ? i + \"px\" : 0\n      }${scaleCompensation}`;\n    }).join(\",\");\n  }).join(\",\");\n\n  const handleFocus = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.target.select();\n  };\n\n  return (\n    <Container>\n      <Box padding={2}>\n        <Space h={1} />\n\n        <HeaderH1\n          style={{\n            fontWeight: 900,\n            display: \"inline-block\",\n            width: \"auto\",\n            padding: \"6px\",\n            backgroundColor: \"var(--accent-color)\",\n          }}>\n          img2css\n        </HeaderH1>\n\n        <Space h={1} />\n        <Text>\n          This is a tool that can convert any image into a pure css image.\n        </Text>\n        <Space h={2} />\n\n        <Dropzone\n          onDrop={onFileSelected}\n          onDragOver={onDragOver}\n          onDragEnter={onDragOver}>\n          {loadingImage ? (\n            <Text>Processing...</Text>\n          ) : (\n            <div>\n              <Text>Drop an image here</Text>\n              <Text>or click to select</Text>\n            </div>\n          )}\n          <input\n            type=\"file\"\n            onChange={onFileSelected}\n            multiple\n            accept=\"image/*\"\n            aria-label=\"Drop an image here, or click to select\"\n          />\n        </Dropzone>\n\n        <Space h={2} />\n        <Text>\n          I also made a per-pixel animation experiment, see{\" \"}\n          <A href=\"https://javier.xyz/morphin/\">morphin</A>.\n        </Text>\n\n        {rgbMatrix && (\n          <Fragment>\n            <Space h={2} />\n            <Tabs>\n              <Inline>\n                <Tab\n                  active={outputType === \"SHADOW\"}\n                  key={\"SHADOW\"}\n                  onClick={() => {\n                    outputTypeSet(\"SHADOW\");\n                  }}>\n                  <Text>{\"Pure CSS\"}</Text>\n                </Tab>\n                <Tab\n                  active={outputType === \"BASE64\"}\n                  key={\"BASE64\"}\n                  onClick={() => {\n                    outputTypeSet(\"BASE64\");\n                  }}>\n                  <Text>{\"Base64\"}</Text>\n                </Tab>\n              </Inline>\n            </Tabs>\n            <Space h={1} />\n\n            {outputType === \"BASE64\" && (\n              <Fragment>\n                <Text>\n                  <strong>The result (base64).</strong>{\" \"}\n                  {\n                    \"This is your image tag a base64 output. The entire image file is embedded inside the `<img>` tag using base64, so no need external hosting is needed.\"\n                  }\n                </Text>\n                <Space h={1} />\n\n                <img\n                  src={base64Data}\n                  style={{ maxWidth: \"100%\", height: \"auto\", display: \"block\" }}\n                />\n\n                <Space h={1} />\n\n                <Textarea\n                  onFocus={handleFocus}\n                  onChange={() => {}}\n                  className=\"code\"\n                  value={`<img src=\"${base64Data}\" />`}\n                />\n                <Space h={1} />\n                <Text>\n                  Output size (resized): {base64Data.length.toLocaleString()}b\n                </Text>\n                <Text>\n                  Original size: {Number(originalSize).toLocaleString()}b\n                </Text>\n              </Fragment>\n            )}\n\n            {outputType === \"SHADOW\" && (\n              <Fragment>\n                <Text>\n                  <strong>The result (pure CSS).</strong> This is your pure CSS\n                  (and single div) image, enjoy! This output was created by\n                  resizing and setting each pixel as a box-shadow of a single pixel div, so\n                  no `img` tag or `background-image` is needed. This can result\n                  in huge outputs, and the use of this output is not recommended\n                  for production unless there is no other option.\n                </Text>\n                <Space h={1} />\n                <div\n                  style={{\n                    height: 1,\n                    width: 1,\n                    boxShadow: masterShadow,\n                    marginBottom: rgbMatrix[0].length * scale,\n                    marginRight: rgbMatrix.length * scale,\n                  }}\n                />\n                <Space h={1} />\n                <Textarea\n                  onFocus={handleFocus}\n                  onChange={() => {}}\n                  className=\"code\"\n                  value={`<div style=\"margin-right: ${\n                    rgbMatrix[0].length * scale\n                  }px; margin-bottom: ${\n                    rgbMatrix.length * scale\n                  }px; height: 1px; width: 1px; box-shadow: ${masterShadow}\"></div>`}\n                />\n                <Space h={1} />\n                <Text>\n                  Output size (resized): {masterShadow.length.toLocaleString()}b\n                </Text>\n                <Text>\n                  Original size: {Number(originalSize).toLocaleString()}b\n                </Text>\n              </Fragment>\n            )}\n          </Fragment>\n        )}\n\n        <Space h={2} />\n\n        <Text>More unrelated experiments</Text>\n        <Space h={0.5} />\n        <Ul>\n          <Li>\n            <Text>\n              Create single line SVG illustrations from your pictures,{\" \"}\n              <A href=\"https://javier.xyz/pintr/\">PINTR</A>.\n            </Text>\n          </Li>\n          <Li>\n            <Text>\n              Play with 3D and shadows,{\" \"}\n              <A href=\"https://sombras.app/\">sombras.app</A>.\n            </Text>\n          </Li>\n          <Li>\n            <Text>\n              Find the visual center in your images / logos,{\" \"}\n              <A href=\"https://javier.xyz/visual-center/\">visual-center</A>.\n            </Text>\n          </Li>\n        </Ul>\n\n        <Space h={2} />\n        <Text>\n          Made by <A href=\"https://twitter.com/javierbyte\">javierbyte</A>.\n        </Text>\n        <Space h={3} />\n      </Box>\n    </Container>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./app.jsx\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}